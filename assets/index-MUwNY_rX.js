import{p as l,W as s,s as c,t as o,v as h,w as A,x as w,y as i,z as r}from"./main-4lvyySLX.js";const y="SafePal";class f extends l{constructor(a={}){super(),this.name=y,this.url="https://safepal.io",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAP1BMVEUAAABKIe9MIO9LIO9KIe5KIO9KIe9KIO5JIO1KIu1KIO1KIe////+kkPfo4/1hPfFgPfGZgvaOdPWDZvRVL/CpQHckAAAAC3RSTlMA7yC/oDDfgJCQkAOmnXUAAADnSURBVEjHlZbtjoJAEAR7BwTvmvUO9f2f1USNk81MRrp+VxFY9gsvbJ0aC9r0Y3Bs5gHmT3JqPMRy0nyyPQtbeJhmAGYKzIBRwvBLiRUTJSY0SjQw4X7tI//8kAV/l22k04HoE6JPiD4h+oToE8HfWYLwfNZg9EOQvpL7Mag+et+SoBrWWxaUP64nQT01ehLUk6/nwXYLgRdpsIfAiyy4VAuoc8B9D0rcPxbs7sfAB8oJPiH6hOgTok+IPiH4YQH1keudCfJmrG/3KyXO8pGlH4ow4bMX0w/2Z7EIvnY5cez87fqzvvUH/qNgaUlN588AAAAASUVORK5CYII=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?s.Unsupported:s.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==s.Unsupported&&c(()=>{var t;return(t=window.safepal)!=null&&t.isSafePalWallet?(this._readyState=s.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==s.Installed)throw new o;this._connecting=!0;const a=window.safepal;let t;try{t=await a.getAccount()}catch(n){throw new h(n==null?void 0:n.message,n)}let e;try{e=new A(t)}catch(n){throw new w(n==null?void 0:n.message,n)}this._wallet=a,this._publicKey=e,this.emit("connect",e)}catch(a){throw this.emit("error",a),a}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(a){try{const t=this._wallet;if(!t)throw new i;try{return await t.signTransaction(a)}catch(e){throw new r(e==null?void 0:e.message,e)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(a){try{const t=this._wallet;if(!t)throw new i;try{return await t.signAllTransactions(a)}catch(e){throw new r(e==null?void 0:e.message,e)}}catch(t){throw this.emit("error",t),t}}}export{f as SafePalWalletAdapter,y as SafePalWalletName};
