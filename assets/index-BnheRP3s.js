const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cf5OKIV0.js","assets/events-BA9ctX3e.js","assets/main-4lvyySLX.js"])))=>i.map(i=>d[i]);
import{A as N,W as n,t as a,_ as j,J as r,v as I,w as u,x as D,y as s,E as o,z as c}from"./main-4lvyySLX.js";const l="Keystone";class E extends N{get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}constructor(t={}){super(),this.name=l,this.url="https://keyst.one",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE2IiBmaWxsPSJ3aGl0ZSIvPgogICAgPHJlY3QgeD0iNSIgeT0iNSIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIxIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjY5NjUgNS40MzQ4N0MxNS4wOTEgNC43NTMxNiAxNi4wNzQ5IDQuNzUyMTEgMTYuNDcwOCA1LjQzMjk5TDE3LjMzOTggNi45MjcxOUMxNy42NDkgNy40NTg5NiAxNy42NDg3IDguMTE1ODggMTcuMzM4OSA4LjY0NzM0TDkuNjMxMjEgMjEuODcxQzkuMjE4NTEgMjIuNTc5MSA4LjE5NjIzIDIyLjU4MTEgNy43ODA3NiAyMS44NzQ2QzcuNzMxMzIgMjEuNzkwNiA3LjY5MzU4IDIxLjcwMDEgNy42Njg1OCAyMS42MDU4TDcuMzcwODggMjAuNDgyOUM3LjA5MjY2IDE5LjQzMzQgNy4yNDE4IDE4LjMxNjQgNy43ODU2MyAxNy4zNzY3TDE0LjY5NjUgNS40MzQ4N1pNMTIuNjYzNiAxOS4yODU4QzEzLjA2MzUgMTguNTk5NyAxNC4wMDM1IDE4LjQ3NTcgMTQuNTY3NyAxOS4wMzQ1TDE3LjQyODggMjEuODY4NkMxOC44NjA1IDIzLjI4NjcgMTguODU2NSAyNS42MDE2IDE3LjQyIDI3LjAxNDlDMTcuMjA0NSAyNy4yMjY5IDE2Ljg3OTggMjcuMjgyNSAxNi42MDYgMjcuMTU0MkwxMS42MDAyIDI0LjgwODFDMTAuNjkwNyAyNC4zODE5IDEwLjM0MyAyMy4yNjcxIDEwLjg0ODcgMjIuMzk5NEwxMi42NjM2IDE5LjI4NThaTTIwLjQzNSAxNi4zMzcyQzIxLjQ4OTcgMTYuMzM3MiAyMi4xNDc0IDE1LjE5MzkgMjEuNjE3MiAxNC4yODIyTDE5Ljc4MjggMTEuMTI4QzE5LjI1NTggMTAuMjIxOCAxNy45NDcxIDEwLjIyMTIgMTcuNDE5MiAxMS4xMjY5TDE1LjQzMDkgMTQuNTM4MUMxNC45NjYgMTUuMzM1OCAxNS41NDE0IDE2LjMzNzIgMTYuNDY0NyAxNi4zMzcyTDIwLjQzNSAxNi4zMzcyWiIgZmlsbD0iYmxhY2siLz4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjEuNzMwMyAxNy42NDU5QzIyLjg3MTMgMTcuNjQ1OSAyMy45MjYxIDE4LjI1MjcgMjQuNDk5OCAxOS4yMzlWMTkuMjM5QzI0LjY3NjMgMTkuNTQyNyAyNC42MjQ3IDE5LjkyNzQgMjQuMzc0MyAyMC4xNzM3TDIyLjA1MTEgMjIuNDU5QzIxLjQ1MDkgMjMuMDQ5NCAyMC40ODc3IDIzLjA0NzggMTkuODg5NSAyMi40NTUzTDE2LjUxMDEgMTkuMTA3OEMxNS45Njc3IDE4LjU3MDYgMTYuMzQ4MSAxNy42NDU5IDE3LjExMTYgMTcuNjQ1OUwyMS43MzAzIDE3LjY0NTlaIiBmaWxsPSIjMjE2MUZGIi8+Cjwvc3ZnPgo=",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?n.Unsupported:n.Loadable,this._keyring=null,this._publicKey=null,this._connecting=!1}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==n.Loadable)throw new a;this._connecting=!0;let t;try{const{DefaultKeyring:e}=await j(async()=>{const{DefaultKeyring:g}=await import("./index-Cf5OKIV0.js").then(y=>y.i);return{DefaultKeyring:g}},__vite__mapDeps([0,1,2]));t=e.getEmptyKeyring()}catch(e){throw new r(e==null?void 0:e.message,e)}let M;try{await t.readKeyring(),M=t.getAccounts()[0].pubKey}catch(e){throw new I(e==null?void 0:e.message,e)}let i;try{i=new u(M)}catch(e){throw new D(e==null?void 0:e.message,e)}this._keyring=t,this._publicKey=i,this.emit("connect",i)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){this._keyring&&(this._keyring=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(t){try{const M=this._keyring,i=this._publicKey;if(!M||!i)throw new s;try{if(o(t)){const e=t.serialize(),g=await M.signTransaction(i.toString(),e);t.addSignature(i,g)}else{const e=t.serializeMessage(),g=await M.signTransaction(i.toString(),e);t.addSignature(i,Buffer.from(g))}return t}catch(e){throw new c(e==null?void 0:e.message,e)}}catch(M){throw this.emit("error",M),M}}async signMessage(t){var M;try{const i=this._keyring,e=(M=this._publicKey)==null?void 0:M.toString();if(!i||!e)throw new s;try{return i.signMessage(e,t)}catch(g){throw new c(g==null?void 0:g.message,g)}}catch(i){throw this.emit("error",i),i}}}export{E as KeystoneWalletAdapter,l as KeystoneWalletName};
