import{A as c,W as a,s as l,t as o,v as w,w as h,x as g,K as u,y as i,z as r,H as y}from"./main-4lvyySLX.js";const M="ONTO";class T extends c{constructor(n={}){super(),this.name=M,this.url="https://onto.app",this.icon="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyODggMjg4Ij4KICA8dGl0bGU+T05UTyBMT0dPXzI4OHgyODg8L3RpdGxlPgogIDxnIGlkPSJMT0dPIj4KICAgIDxwYXRoIGlkPSLlvaLnirbnu5PlkIgiIGQ9Ik0zMCwxMS4xNSw3MS4xOSw1Mi4zMkExMTUsMTE1LDAsMCwxLDI1OCwxMzguNjdMMjU4LDE0MlYyNzYuODVsLTQxLjE5LTQxLjE2QTExNSwxMTUsMCwwLDEsMzAuMDUsMTQ5LjM0TDMwLDE0NlptMjguMTcsNjhWMTQ2YTg2Ljc5LDg2Ljc5LDAsMCwwLDEzNS4xNSw3MmwyLjIzLTEuNTVMNjMuNjcsODQuNjVaTTk0LjY4LDcwbC0yLjIzLDEuNTVMMjI0LjMzLDIwMy4zNmw1LjUsNS41VjE0MkE4Ni43OSw4Ni43OSwwLDAsMCw5NC42OCw3MFoiLz4KICA8L2c+Cjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?a.Unsupported:a.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==a.Unsupported&&l(()=>{var t,e;return(e=(t=window.onto)==null?void 0:t.solana)!=null&&e.isONTO?(this._readyState=a.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==a.Installed)throw new o;this._connecting=!0;const n=window.onto.solana;let t;try{t=await n.getAccount()}catch(s){throw new w(s==null?void 0:s.message,s)}let e;try{e=new h(t)}catch(s){throw new g(s==null?void 0:s.message,s)}this._wallet=n,this._publicKey=e,this.emit("connect",e)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){const n=this._wallet;if(n){this._wallet=null,this._publicKey=null;try{await n.disconnect()}catch(t){this.emit("error",new u(t==null?void 0:t.message,t))}}this.emit("disconnect")}async signTransaction(n){try{const t=this._wallet;if(!t)throw new i;try{return await t.signTransaction(n)||n}catch(e){throw new r(e==null?void 0:e.message,e)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(n){try{const t=this._wallet;if(!t)throw new i;try{return await t.signAllTransactions(n)||n}catch(e){throw new r(e==null?void 0:e.message,e)}}catch(t){throw this.emit("error",t),t}}async signMessage(n){try{const t=this._wallet;if(!t)throw new i;try{const{signature:e}=await t.signMessage(n);return e}catch(e){throw new y(e==null?void 0:e.message,e)}}catch(t){throw this.emit("error",t),t}}}export{T as OntoWalletAdapter,M as OntoWalletName};
