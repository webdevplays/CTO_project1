import{A as h,W as s,q as w,s as d,t as y,D as g,v as u,w as m,x as p,K as I,y as l,F as S,G as _,z as c,H as b}from"./main-4lvyySLX.js";const f="Tokenary";class T extends h{constructor(e={}){super(),this.name=f,this.url="https://tokenary.io/get",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzRweCIgaGVpZ2h0PSIzNHB4IiB2aWV3Qm94PSIwIDAgMzQgMzQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+T3ZhbDwvdGl0bGU+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBmaWxsPSIjMkM3Q0Y1IiBjeD0iMTciIGN5PSIxNyIgcj0iMTciPjwvY2lyY2xlPgogICAgPC9nPgo8L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?s.Unsupported:s.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new w),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==s.Unsupported&&d(()=>{var t;return(t=window.tokenarySolana)!=null&&t.isTokenary?(this._readyState=s.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==s.Installed)throw new y;this._connecting=!0;const e=window.tokenarySolana;try{await e.connect()}catch(n){throw new g(n==null?void 0:n.message,n)}if(!e.publicKey)throw new u;let t;try{t=new m(e.publicKey.toBytes())}catch(n){throw new p(n==null?void 0:n.message,n)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new I(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,n={}){try{const a=this._wallet;if(!a)throw new l;try{const{signers:i,...r}=n;e=await this.prepareTransaction(e,t,r),i!=null&&i.length&&e.partialSign(...i),r.preflightCommitment=r.preflightCommitment||t.commitment;const{signature:o}=await a.signAndSendTransaction(e,r);return o}catch(i){throw i instanceof S?i:new _(i==null?void 0:i.message,i)}}catch(a){throw this.emit("error",a),a}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new l;try{return await t.signTransaction(e)||e}catch(n){throw new c(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new l;try{return await t.signAllTransactions(e)||e}catch(n){throw new c(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new l;try{const{signature:n}=await t.signMessage(e);return n}catch(n){throw new b(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}}export{T as TokenaryWalletAdapter,f as TokenaryWalletName};
